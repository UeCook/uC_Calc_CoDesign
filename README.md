# uC_Calc_单片机简易计算器课设

## 版权声明
- 采用 (CC BY-NC-SA 4.0) 发布
- NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)

本人无“重庆开源共创”旗下的 GitCode 平台账号，从未主动且从未授权第三方在 GitCode 平台上创建存储库。严禁 GitCode 等代码托管平台在未经作者本人书面许可的情况下私自搬运本仓库以及与之关联的所有分支项目，否则作者将追究法律责任。

uC_Calc_CoDesign 代码托管平台仅为 GitHub。

## 简介

本设计是以8051内核的单片机为核心，进行简易计算器的系统设计。输入部分采用4×5矩阵键盘，该设计作品可以进行加、减、乘、除简易运算、小数运算、负数运算以及开平方根运算，同时支持退位按键，通过LCD1602静态显示操作过程及结果。

## 特性

- **简易运算**：支持基本的四则运算。
- **多位数运算**：处理多位数字的计算。
- **连续运算**：用户可以在不中断的情况下进行一系列计算。
- **开根号运算**：提供开平方根的功能。
- **小数与负数运算**：能够处理包含小数点和负数的表达式。
- **退位键和清零键**：方便用户更正输入或重置计算。

## 安装与使用指南

https://zhuanlan.zhihu.com/p/15124187849

## 贡献

本作品为原创设计作品（课程设计），如果您对本项目有兴趣并希望做出贡献，请联系作者。

## 问题描述

单片机上电后，LCD液晶屏只在第0行显示一行黑色方块，按下任何一个按钮均无任何反应。该问题只存在于当前PCB软件，仿真实验与单片机开发板未见其问题。

## 单片机LCD显示故障与复位电路短路问题的分析

原因：“单片机上电后LCD液晶屏只在第0行显示一行黑色方块”该问题表示LCD显示屏上电复位成功，但是初始化失败。说明1602没有接收到单片机发来的数据，于是使用万用表对电路进行测量。首先使用万用表蜂鸣器档位在断电情况下测量。发现在断电状态下，单片机复位电路中的电容呈现导通状态，也就是短路。于是在上电状态下，使用万用表电压档测量晶振电路，发现晶振电路未产生电压，单片机RST复位引脚持续输入5V电流。

在本次设计的单片机电路中，我采用了基于电容充电的高电平复位机制。该机制依赖于电容充电过程来实现复位功能。电源接通瞬间，复位端电位与VCC一致，随着充电电流的减少，复位端电位逐渐降低。当电容充满电后，复位端电压降至低电平。加入开关的目的是在按下开关时，使复位端电压变为高电平，从而触发单片机复位。然而，该按键复位电路存在一个缺陷：在电源因干扰瞬间断电时，由于电容未能迅速放电，电源恢复时单片机无法自动复位，可能导致程序运行异常。电源瞬间断电的干扰可能会使程序停止正常运行，出现“程序跑飞”或“死循环”现象。尽管如此，对于简单的单片机程序，此问题通常不会影响其运行。

问题详细描述：在断电条件下，复位电路中的电容两端依然保持导通状态。因为根据电路配置，该复位电路应当被视为一个典型的RC充电电路，配备有10uF的电容、在5V的供电电压下，电容器应在理论上的0.5秒内完成充电截断电压的过程。于是使用未焊接的新电路板进行验证。首先只焊接复位电路电容，焊接完成后使用万用表蜂鸣器档位测量，未出现短路现象，使用万用表电容档位测量，测得电容容值为9.98uF，说明电容焊接良好。随后焊接复位开关，焊接完成后再使用万用表蜂鸣器档位测量，发现此时电容短路，随后测量单片机RST引脚和VCC供电引脚，依旧处于短路状态。随后拆掉该复位开关，将开关左右两个引脚使用导线连接，问题复现。

综上所述，问题的根源在于复位开关焊接操作之后出现的电容短路现象。这一短路导致5V电压未经调节直接输入至单片机，使得单片机持续处于高电平信号的接收状态，从而维持在复位模式。这种持续的复位状态进一步阻碍了晶振的正常起振。在使用示波器进行波形检测时，未能检测到晶振的振动波形，表明晶振未能产生振荡。从而导致LCD液晶屏只在第0行显示一行黑色方块，按下任何一个按钮均无任何反应。

## 联系作者

邮箱：ModalFare_ST@outlook.com
